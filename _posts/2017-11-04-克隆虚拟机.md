## 克隆虚拟机

​	VMware虚拟机安装系统虽然方便，但是搭集群时如果每个结点都重新安装的话也是很耗时的。幸好VMware有个克隆功能，用起来非常方便，非常爽。下面就给出简单的克隆教程。前提是你已经有一个安装好系统且配置好环境的虚拟机。

![0](..\images\vmware\0.png)

这里我就用图上的nginx虚拟机做演示，我安装的是centos7。

### 1、右键nginx虚拟机--》快照--》拍摄快照

![1](..\images\vmware\1.png)

### 2、点击拍摄快照，快照拍摄成功。名称可自填

![2](..\images\vmware\2.png)

### 3、再右键nginx虚拟机--》管理--》克隆

![3](..\images\vmware\3.png)

### 4、下一步

### 5、选择现有快照--》下一步

![4](..\images\vmware\4.png)

### 6、选择创建完整克隆--》下一步

![5](..\images\vmware\5.png)

### 7、输入虚拟机名称，安装地址，点击完成，等待克隆完成。

![6](..\images\vmware\6.png)

### 8、至此我们完成了克隆虚拟机的任务

![7](..\images\vmware\7.png)

### 9、配置网络

![8](..\images\vmware\8.png)

​	什么都没设置网络居然是好的，但是回头看原虚拟机，发现原虚拟机访问不了网络了，果然有问题。

![9](..\images\vmware\9.png)

#### ①、删除/etc/sysconfig/network-scripts/ifcfg-ens33 的UUID这一行，因为每张网卡的[mac地址](http://www.itnpc.com/news/technology/)是不一样的，所以UUID也是不一样的。如果有HWADDR或MACADDR这个选项也得把这一行给去了。

![11](..\images\vmware\10.png)

#### ②、进入/etc/udev/rules.d/这个目录，删除文件70-persistent-ipoib.rules然后重启。

![11](..\images\vmware\11.png)

注意MAC地址和上面发生了变化，IP地址是我自己配的。至此网络也配好了。

![12](..\images\vmware\12.png)

外网也可以ping通。完美！