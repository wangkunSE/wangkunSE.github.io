---
title: 编译安装nginx的坑
date: 2017-11-03 15:50:39
categories: [编程]
tags:
- nginx
---

## 编译安装nginx的坑



### 报错信息

```shell
make -f objs/Makefile
make[1]: Entering directory `/data/source/nginx'
cd /usr/local/ufo/lib/pcre \
&& if [ -f Makefile ]; then make distclean; fi \
&& CC="gcc" CFLAGS="-O2 -fomit-frame-pointer -pipe " \
./configure --disable-shared
/bin/sh: ./configure: No such file or directory
make[1]: *** [/usr/local/services/lib/pcre/Makefile] Error 127
make[1]: Leaving directory `/data/source/nginx-0.7.61'
make: *** [build] Error 2

```

### 分析

> 一开始一点儿头绪都没有，上网查发现是少了pcre和zlib的包，后来添加上nginx自带的两个目录。./configure过了，但是make编译又出错，说是没找到pcre，但是我明明用**--with-pcre=/pcre/home**指定了啊，查来查去发现要指定源码目录。我用yum安装的pcre包，找了一下没找到源码啊，网上的博客也都是抄来抄去没解决我的问题，后来我就想没有那就下个源码包好了。就用下面两个命令下载好，解压好。终于编译通过。

```shell
wget https://jaist.dl.sourceforge.net/project/libpng/zlib/1.2.11/zlib-1.2.11.tar.gz
wget https://jaist.dl.sourceforge.net/project/libpng/zlib/1.2.11/zlib-1.2.11.tar.gz
```

> 启动nginx发现外网访问无响应，才想起来防火墙没关，关掉防火墙访问，终于看到期待的画面。

```shell
systemctl stop firewalld.service
systemctl disable firewalld.service
```



{% asset_img nginx_home.jpg %}